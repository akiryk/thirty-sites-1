{"version":3,"sources":["main.js"],"names":["scrollScripts","init","scrollContent","document","querySelector","initScrollMagic","intro","getElementById","startY","utils","getYPosition","clone","controller","ScrollMagic","Controller","top","bottom","duration","window","innerHeight","handleEndTitle","headingWrapper","Scene","setTween","rotation","on","evt","addTo","startTitleTop","x","startTitleBottom","scaleObj","bgAnimation","displacementFilter","scale","blurTween","TweenMax","to","y","ease","Power1","easeOutIn","copyScene","offset","firstParagraph","matrixTween","transform","copy","paragraphScene","triggerElement","endTitle","event","cloneY","getBoundingClientRect","set","scroll","app","stage","pixiImage","image","PIXI","Application","width","height","transparent","antialias","appendChild","view","loadPixiImage","createDisplacementFilter","img","filters","DisplacementFilter","loader","add","load","setup","bind","resources","centerStageX","renderer","screen","centerStageY","sprite","Sprite","texture","anchor","position","filterImg","filter","spriteRightBound","baseTexture","wrapMode","WRAP_MODES","REPEAT","addChild","ticker","gameloop","delta","el","yPos","offsetTop","scrollTop","clientTop","offsetParent"],"mappings":"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","file":"main.js","sourcesContent":["const scrollScripts = {\n\n  init() {\n    this.scrollContent = document.querySelector('.scroll-content');\n    // this.watchScrolling();\n    this.initScrollMagic();\n  },\n\n  initScrollMagic() {\n\n    this.intro = document.getElementById('head1');\n    this.startY = utils.getYPosition(this.intro);\n    this.clone = document.getElementById('head2');\n    this.controller = new ScrollMagic.Controller();\n\n    const controller = this.controller,\n          intro = this.intro,\n          startY = this.startY,\n          clone = this.clone;\n\n    this.top = document.querySelector('.headline--top');\n    this.bottom = document.querySelector('.headline--bottom');\n    const top = this.top;\n    const bottom = this.bottom;\n\n    const duration = .85 * window.innerHeight;\n\n    this.handleEndTitle();\n\n    const headingWrapper = new ScrollMagic.Scene({\n      duration: duration,\n    })\n      .setTween('#head1-wrapper', 1, {rotation: 20})\n      .on('update', function(evt){\n      })\n      .addTo(controller);\n\n    const startTitleTop = new ScrollMagic.Scene({\n      duration: duration,\n    })\n      .setTween(top, 1, {x: 200 })\n      .addTo(controller);\n\n    const startTitleBottom = new ScrollMagic.Scene({\n      duration: duration,\n    })\n      .setTween(bottom, 1, {x: -200 })\n      .addTo(controller);\n\n    const scaleObj = bgAnimation.displacementFilter.scale;\n    const blurTween = TweenMax.to(scaleObj, .85, {x: 25, y: 25, ease: Power1.easeOutIn});\n\n    const copyScene = new ScrollMagic.Scene({\n      offset: 300,\n    })\n      .setTween(blurTween)\n      .addTo(controller);\n\n    const firstParagraph = document.querySelector('.para');\n    const matrixTween = TweenMax.to(firstParagraph, 1, {transform: 'translate(-3%, 0%) matrix(1,0,0,1,0,0)'});\n    const copy = document.querySelector('.copy');\n    const paragraphScene = new ScrollMagic.Scene({\n      duration: 2000,\n      triggerElement: copy,\n    })\n      .setTween(matrixTween)\n      .addTo(controller);\n\n  },\n\n  handleEndTitle() {\n    const controller = this.controller;\n    const clone = this.clone;\n    const startY = this.startY;\n    const top = this.top;\n    const bottom = this.bottom;\n\n    const endTitle = new ScrollMagic.Scene({\n      triggerElement: '#head2',\n    })\n      .addTo(controller); // assign the scene to the controller\n\n    endTitle.on(\"update\", function (event) {\n      // when clone moves past location or original, scroll to top\n      const cloneY = clone.getBoundingClientRect().top;\n      if (cloneY <= startY){\n        TweenMax.set('#head1-wrapper', {rotation: 0});\n        TweenMax.set(top, {x: 0});\n        TweenMax.set(bottom, {x: 0});\n        window.scroll(startY - cloneY,0);\n      }\n    });\n\n  },\n}\n\nconst bgAnimation = {\n\n  app: null,\n\n  displacementFilter: null,\n\n  stage: null,\n\n  init({pixiImage}) {\n\n    this.image = pixiImage;\n\n    this.app = new PIXI.Application({\n      width: 1200,\n      height: 1200,\n      transparent: false,\n      antialias: false,\n    });\n\n    document.getElementById('display').appendChild(this.app.view);\n\n    this.stage = this.app.stage;\n    this.loadPixiImage();\n  },\n\n  createDisplacementFilter(img){\n    this.displacementFilter = new PIXI.filters.DisplacementFilter(img);\n    this.displacementFilter.scale.x = 250;\n    this.displacementFilter.scale.y = 140;\n  },\n\n  loadPixiImage() {\n    PIXI.loader\n      .add('sprite', this.image)\n      .add('filter', 'images/clouds-600.jpg')\n      .load(this.setup.bind(this));\n  },\n\n  setup(loader, resources){\n    const app = this.app;\n    const stage = this.stage;\n\n    // Cache stage details\n    const centerStageX = app.renderer.screen.width/2;\n    const centerStageY = app.renderer.screen.height/2;\n\n    // Images\n    const sprite = new PIXI.Sprite(resources.sprite.texture);\n    sprite.anchor.set(.5);\n    sprite.position.set(centerStageX, centerStageY);\n    const filterImg = new PIXI.Sprite(resources.filter.texture);\n    filterImg.anchor.set(.5);\n    filterImg.position.set(centerStageX, centerStageY);\n\n    const spriteRightBound = centerStageX + sprite.width/2;\n\n    // Filters\n    // const disFilter = new filters.DisplacementFilter(filterImg);\n    this.createDisplacementFilter(filterImg);\n    filterImg.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT;\n\n    stage.filters = [this.displacementFilter];\n\n    // Add Images\n    stage.addChild(sprite);\n    stage.addChild(filterImg);\n\n    app.ticker.add(delta => gameloop(delta));\n\n    function gameloop(delta){\n      filterImg.rotation -= .002;\n    }\n\n    // Start ScrollMagic\n    scrollScripts.init();\n  },\n\n}\n\nconst utils = {\n\n  /**\n   * @description Get the y position of an element\n   * @param {element}\n   * @return {number} yPos\n   */\n  getYPosition(el) {\n    let yPos = 0;\n    while(el) {\n      yPos += (el.offsetTop - el.scrollTop + el.clientTop);\n      el = el.offsetParent;\n    }\n    return yPos;\n  },\n\n}\n\nbgAnimation.init({pixiImage: 'images/hamp-600.jpg'});\n"]}